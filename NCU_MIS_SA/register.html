<!DOCTYPE html>
<html>

    <!-- Basic -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">   
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <link href="statics/icon/favicon.ico" type="image/x-icon" rel="icon">
    <link href="statics/icon/favicon.ico" type="image/x-icon" rel="shortcut icon">
    <link rel="stylesheet" type="text/css" href="statics/css/cake.generic.css">
    <!-- Mobile Metas -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">	
 
     <!-- Site Metas -->
    <title>Wundon Xican-桑幾勒</title>  
    <meta name="keywords" content="">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Site Icons -->
    <link rel="shortcut icon" href="statics/images/favicon.ico" type="image/x-icon" />
    <link rel="apple-touch-icon" href="statics/images/apple-touch-icon.png">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="statics/css/bootstrap.min.css">
    <!-- Site CSS -->
    <link rel="stylesheet" href="statics/css/style.css">
    <!-- Responsive CSS -->
    <link rel="stylesheet" href="statics/css/responsive.css">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="statics/css/custom.css">
    
    <link rel="stylesheet" href="statics/css/login.css">
	<script src="statics/js/modernizr.js"></script>
	
	<script src="statics/js/jquery-3.4.1.min.js" crossorigin="anonymous"></script>

<body>
<!-- 	<div id="preloader"> -->
<!--         <div id="main-ld"> -->
<!-- 			<div id="loader"></div>   -->
<!-- 		</div> -->
<!--     </div> -->
<!-- 	<div class="login-hero" align="center"> -->
		<div class="login-form-box" >
			<div class="login-button-box" >
				<div id="login-btn"></div>
				<button type="button" class="login-toggle-btn" style="color:silver;" onclick="login()">登入</button>
				<button type="button" class="login-toggle-btn" style="color:silver;" onclick="register()">註冊</button>
			</div>
			<div class="row">
				<div class="col-md-12">
					<form id="login" class="input-group">
						<div class="row">
							<div class="col-md-2"></div>
			                <div class="col-md-8">
			                	<div align="center" class="contact_form" >
			                        <div id="message"></div>
						         	<form id="contactForm" name="sentMessage" novalidate="novalidate">    
							             <div class="row">
											<div class="col-md-12">
												<div class="form-group">
													<input class="form-control" id="login_member_email" type="email" placeholder="請輸入電子信箱" required="required" data-validation-required-message="Please enter your email address.">
													<p class="help-block text-danger"></p>
												</div>
											</div>
											<div class="col-md-12">
												<div class="form-group">
													<input class="form-control" id="login_member_password" type="password" placeholder="請輸入密碼" required="required" data-validation-required-message="Please enter your phone number.">
													<p class="help-block text-danger"></p>
												</div>
											</div>
											<div class="clearfix"></div>
											<div class="col-lg-12 text-center">
												<div id="success"></div>

												<button id="submit-login" class="sim-btn hvr-rectangle-out" data-text="Register" type="submit">登入</button>

											</div>
										</div>
									</form>
								</div>
							</div>
						</div>
					</form>
				</div>
				<div class="col-md-12">
					<form id="register" class="input-group" style="display: none;">
					<div class="row">
<!-- 						<div class="col-md-2"></div> -->
		                <div class="">
		                    <div align="center" class="contact_form" >
		                        <div id="message"></div>
					         		<form id="contactForm" name="sentMessage" novalidate="novalidate">    
						             <div class="row">
						             	<div class="col-md-12">						
										<div class="form-group">   
							                <div class="input text required">
							                    <input class="form-control" id="member_firstname" type="text" placeholder="請輸入名字" required="required" data-validation-required-message="Please enter your firstname.">
												<p class="help-block text-danger"></p>
							                </div>
						                </div>
						                </div>
						                <div class="col-md-12">
										<div class="form-group">
											<input class="form-control" id="member_lastname" type="text" placeholder="請輸入姓氏" required="required" data-validation-required-message="Please enter your lastname.">
											<p class="help-block text-danger"></p>
										</div>
									</div>
									<div class="col-md-12">
										<div class="form-group">
											<input class="form-control" id="register_member_email" type="email" placeholder="請輸入電子信箱" required="required" data-validation-required-message="Please enter your email address.">
											<p class="help-block text-danger"></p>
										</div>
									</div>
									<div class="col-md-12">
										<div class="form-group">
											<input class="form-control" id="register_member_password" type="password" placeholder="請輸入密碼" required="required" data-validation-required-message="Please enter your phone number.">
											<p class="help-block text-danger"></p>
										</div>
									</div>
									<div class="col-md-12">
										<div class="form-group">
											<input class="form-control" id="member_confirmpassword" type="password" placeholder="請再輸入一次密碼" required="required" data-validation-required-message="Please enter your phone number.">
											<p class="help-block text-danger"></p>
										</div>
									</div>
									
										<div class="col-md-4">
											<div class="form-group" style="font-size:20px;color:#0b001f;">
												<label for="member_gender" required="required" data-validation-required-message="Please enter a message."></label><br>
												<label class="radio-inline">
												    <input type="radio" name="member_gender" value="男" checked>男生   
												</label>
												<label class="radio-inline">
												    <input type="radio" name="member_gender" value="女" >女生
												</label>
												<p class="help-block text-danger"></p>
											</div>
										</div>
									
									
									<div class="col-md-12">
										<div class="form-group">
										<h3 style="text-align:left;"> 出生日期</h3>
											<input type="date" id="member_Dob">
										</div>
									</div>
									
									<div class="clearfix"></div>
									<div class="col-lg-12 text-center">
										<div id="success"></div>

										<button id="submit-register" class="sim-btn hvr-rectangle-out" data-text="Register" type="submit">Register</button>

									</div>
									</div>
						     	</form>
					         </div>
					    </div>
					 </div>
				</form>
			</div>
		</div>
<!-- 	</div> -->

	<script>
	
	var x=document.getElementById("login");
	var y=document.getElementById("register");
	var z=document.getElementById("login-btn");
	
	function register(){
		$(y).show();
		$(x).hide();
// 		x.style.left="-500px";
// 		y.style.left="10px";
		z.style.left="80px"
	}
	function login(){
		$(x).show();
		$(y).hide();
// 		x.style.left="50px";
// 		y.style.left="500px";
		z.style.left="0px"
	}
	
	
	
	
	
	</script>

    <div id="container">
<!--         <div id="header"> -->
<!--             <h1><a href="http://cakephp.org/">CakePHP: the rapid development php framework</a></h1> -->
<!--         </div> -->
        
        <div id="content">
        	</br>
<!--             <div class="pricing-header px-3 py-3 pt-md-5 pb-md-4 mx-auto text-center"> -->
<!-- 			    <h3 class="display-4">會員註冊</h3> -->
<!-- 			    <p class="lead">請輸入個人資料以完成註冊</p> -->
<!-- 			    <a href="member.html">會員清單</a> -->
<!--             	<a href="rooms.html">房間列表</a> -->
<!-- 			</div> -->
            
            
            <nav class="navbar navbar-expand-lg navbar-dark fixed-top" id="mainNav">
	      <div class="container-fluid">
	        <a class="navbar-brand js-scroll-trigger" href="#page-top">
				<img class="img-fluid" src="statics/images/logo.png" alt="" />
			</a>
	        <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
	          Menu
	          <i class="fa fa-bars"></i>
	        </button>
	        <div class="collapse navbar-collapse" id="navbarResponsive">
	          <ul class="navbar-nav ml-auto">
	            <li class="nav-item">
	              <a class="nav-link js-scroll-trigger" href="index.html">首頁</a>
	            </li>
	            <li class="nav-item">
              	  <a class="nav-link js-scroll-trigger " href="manager.html">管理員登入</a>
          		</li>
	            <li class="nav-item">
	              <a class="nav-link js-scroll-trigger active" href="register.html">註冊/登入</a>
	            </li>
	            <li class="nav-item">
	              <a class="nav-link js-scroll-trigger" href="rooms.html">房間列表</a>
	            </li>
	            <li class="nav-item">
	              <a class="nav-link js-scroll-trigger" href="createroom.html">創建房間</a>
	            </li>
				<li class="nav-item">
	              <a class="nav-link js-scroll-trigger" href="profile.html">個人資料</a>
	            </li>
	            <li class="nav-item">
              	  <a class="nav-link js-scroll-trigger" href="joinedroomlist.html">已加入房間</a>
          		</li>
	          </ul>
	        </div>
	      </div>
	    </nav>
            
            <div id="flashMessage" class="message" style="display: none;"></div>

<!--             <form id="form" accept-charset="utf-8"> -->
<!--                 <div style="display:none;"><input type="hidden" name="_method" value="POST"></div> -->
<!-- 			    <div class="row"> -->
<!-- 	                <div class="col-md-12"> -->
<!-- 	                    <div class="contact_form"> -->
<!-- 	                        <div id="message"></div> -->
<!-- 				         		<form id="contactForm" name="sentMessage" novalidate="novalidate">     -->
<!-- 					             <div class="row"> -->
<!-- 					             	<div class="col-md-6">						 -->
<!-- 									<div class="form-group">    -->
<!-- 						                <div class="input text required"> -->
<!-- 						                    <input class="form-control" id="member_firstname" type="text" placeholder="Your FirstName" required="required" data-validation-required-message="Please enter your firstname."> -->
<!-- 											<p class="help-block text-danger"></p> -->
<!-- 						                </div> -->
<!-- 					                </div> -->
<!-- 					                </div> -->
<!-- 					                <div class="col-md-6"> -->
<!-- 									<div class="form-group"> -->
<!-- 										<input class="form-control" id="member_lastname" type="text" placeholder="Your LastName" required="required" data-validation-required-message="Please enter your lastname."> -->
<!-- 										<p class="help-block text-danger"></p> -->
<!-- 									</div> -->
<!-- 								</div> -->
<!-- 								<div class="col-md-6"> -->
<!-- 									<div class="form-group"> -->
<!-- 										<input class="form-control" id="member_email" type="email" placeholder="Your Email" required="required" data-validation-required-message="Please enter your email address."> -->
<!-- 										<p class="help-block text-danger"></p> -->
<!-- 									</div> -->
<!-- 								</div> -->
<!-- 								<div class="col-md-12"> -->
<!-- 									<div class="form-group"> -->
<!-- 										<input class="form-control" id="member_password" type="password" placeholder="Your Password" required="required" data-validation-required-message="Please enter your phone number."> -->
<!-- 										<p class="help-block text-danger"></p> -->
<!-- 									</div> -->
<!-- 								</div> -->
<!-- 								<div class="col-md-12"> -->
<!-- 									<div class="form-group"> -->
<!-- 										<input class="form-control" id="member_confirmpassword" type="password" placeholder="Confirm Your Password" required="required" data-validation-required-message="Please enter your phone number."> -->
<!-- 										<p class="help-block text-danger"></p> -->
<!-- 									</div> -->
<!-- 								</div> -->
<!-- 								<div class="col-md-6"> -->
<!-- 									<div class="form-group"> -->
<!-- 										<label for="member_gender" required="required" data-validation-required-message="Please enter a message.">性別</label><br> -->
<!-- 										<input type="radio" name="gender" class="form-control" id="member_gender" value="man">男<br> -->
<!-- 										<input type="radio" name="gender" class="form-control" id="member_gender" value="woman">女<br> -->
<!-- 										<p class="help-block text-danger"></p> -->
<!-- 									</div> -->
<!-- 								</div> -->
<!-- 								<div class="clearfix"></div> -->
<!-- 								<div class="col-lg-12 text-center"> -->
<!-- 									<div id="success"></div> -->
<!-- 									<button id="submit" class="sim-btn hvr-rectangle-out" data-text="Send Message" type="submit">Send Message</button> -->
<!-- 								</div> -->
<!-- 					           </form> -->
<!-- 				         </div> -->
<!-- 				    </div> -->
<!-- 			    </div> -->
<!-- 			</form> -->
                <!--
                  <div class="input text required">
                    <label for="member_lastname">名字</label>
                    <input name="lastname" maxlength="30" type="text" id="member_lastname" required="required">
                </div>
                <div class="input email required">
                    <label for="member_email">請輸入電子信箱</label>
                    <input name="email" maxlength="50" type="email" id="member_email" required="required">
                </div>
                <div class="input password required">
                    <label for="member_password">請輸入8~14位密碼(至少包含一個英文字母及一個數字)</label>
                    <input name="password" maxlength="14" type="password" id="member_password" required="required">
                </div>
                <div class="input password required">
                    <label for="member_confirmpassword">請再輸入一次密碼</label>
                    <input name="confirmpassword" maxlength="14" type="password" id="member_confirmpassword" required="required">
                </div>
                <div class="input gender required" id="member_gender" onchange="print_value()">
                    <label for="member_gender">性別</label><br>
					<input type="radio" name="gender" value="man">男<br>
					<input type="radio" name="gender" value="woman">女<br>
                </div>
                <div class="input Dob required">
                    <label for="member_Dob">生日</label>
                      <input type="date" name="Dob">
                </div>
                </form>
                  -->
                
                
            
            
            <!-- 
            	<div class="container-fluid">
            <div class="section-title text-center">
                <h3>Contact</h3>
                <p>Quisque eget nisl id nulla sagittis auctor quis id. Aliquam quis vehicula enim, non aliquam risus.</p>
            </div>
			
				<div class="row">
                <div class="col-md-12">
                    <div class="contact_form">
                        <div id="message"></div>
                        <form id="contactForm" name="sentMessage" novalidate="novalidate">
							<div class="row">
								<div class="col-md-6">
									<div class="form-group">
										<input class="form-control" id="firstname" type="text" placeholder="Your FirstName" required="required" data-validation-required-message="Please enter your firstname.">
										<p class="help-block text-danger"></p>
									</div>
								</div>
								<div class="col-md-6">
									<div class="form-group">
										<input class="form-control" id="lastname" type="text" placeholder="Your LastName" required="required" data-validation-required-message="Please enter your lastname.">
										<p class="help-block text-danger"></p>
									</div>
								</div>
								<div class="col-md-6">
									<div class="form-group">
										<input class="form-control" id="email" type="email" placeholder="Your Email" required="required" data-validation-required-message="Please enter your email address.">
										<p class="help-block text-danger"></p>
									</div>
								</div>
								<div class="col-md-12">
									<div class="form-group">
										<input class="form-control" id="phone" type="tel" placeholder="Your Phone" required="required" data-validation-required-message="Please enter your phone number.">
										<p class="help-block text-danger"></p>
									</div>
								</div>
								<div class="col-md-12">
									<div class="form-group">
										<textarea class="form-control" id="message" placeholder="Your Message" required="required" data-validation-required-message="Please enter a message."></textarea>
										<p class="help-block text-danger"></p>
									</div>
								</div>
								<div class="clearfix"></div>
								<div class="col-lg-12 text-center">
									<div id="success"></div>
									<button id="sendMessageButton" class="sim-btn hvr-rectangle-out" data-text="Send Message" type="submit">Send Message</button>
								</div>
							</div>
						</form>
                    </div>
                </div><!-- end col -->
                
            </div><!-- end row -->
        </div><!-- end container -->
    
          
            
  
			
            
            
            
            <script type="text/javascript">
	            function print_value(){
	            	document.getElementById("gender").innerHTML=document.getElementById("member_gender").value
	            }
                $(document).ready(function() {
                    // 處理表單點擊事件
                    var $login = $('#submit-login');
                    $login.click(function() {
                        loginSubmit();
                    });
                    
                    var $register = $('#submit-register');
                    $register.click(function() {
                        registerSubmit();
                    });

                    function registerSubmit() {
                        var firstname = $('#member_firstname').val();
                        var lastname = $('#member_lastname').val();
                        var email = $('#register_member_email').val();
                        var password = $('#register_member_password').val();
                    	var gender =$("input[name='member_gender']:checked").val();
                        var Dob = $('#member_Dob').val();



                        var email_rule = /^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z]+$/;
                        var password_rule = /^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{8,}$/;

                        if (!email_rule.test(email)) {
                            alert("Email格式不符！");
                        }
                        else if(!password_rule.test(password)) {
                            alert("密碼格式不符，長度至少8，且至少包含一個數字和英文字母！");
                        }
                        else {
                            // 將資料組成JSON格式
                            
                            var data_object = {
                                "firstName": firstname,
                                "lastName": lastname,
                                "email": email,
                                "password": password,
                                "gender": gender,
                                "Dob": Dob
                           
                            
                            };

                            // 將JSON格式轉換成字串
                            var data_string = JSON.stringify(data_object);

                            // 發出POST的AJAX請求
                            $.ajax({
                                    type: "POST",
                                    url: "api/member.do",
                                    data: data_string,
                                    crossDomain: true,
                                    cache: false,
                                    dataType: 'json',
                                    timeout: 5000,
                                    success: function (response) {
                                        alert(gender);
                                        if(response.status == 200){
                                            alert("register successfully");
                                        }
                                        alert("register successfully");
                                    },
                                    error: function () {
                                        alert("無法連線到伺服器！");
                                    }
                            });
                        }
                    }
                    
                    function loginSubmit() {

                        // entered data from the login-form
                        var loginEmail = document.getElementById('login_member_email');
                        var loginPwd = document.getElementById('login_member_password');

                        var Email = loginEmail.value;
                        var Pwd = loginPwd.value;

                        var request = {
                          'email': Email,
                          'pwd': Pwd
                        };
                        var data_string = JSON.stringify(request);
                        $.ajax({
                          type: "POST",
                          url: "/NCU_MIS_SA/api/login.do",
                          async: true,
                          data: data_string,
                          dataType: 'json',
                          success: function (response) {
                            if (response.response.email == Email && response.response.pwd == Pwd) {
                              console.log(JSON.stringify(response));
                          
                              localStorage.setItem('currentEmail', response.response.email);
                              localStorage.setItem('currentPwd', response.response.pwd);
                              localStorage.setItem('currentID', response.response.member_id);
                              alert("successfully logged in");
                            }

                          },
                          error: function () {
                            alert("not connect");
                          }
                        });
                        
                        // check if stored data from register-form is equal to data from login form

                      }



                });
            </script>

        </div>
        
<!--         <div id="footer"> -->
<!--             <a href="http://www.cakephp.org/" target="_blank" id="cake-powered"><img src="statics/img/cake.power.gif" alt="CakePHP: the rapid development php framework" border="0"></a> -->
<!--             <p>CakePHP 2.6.10</p> -->
<!--         </div> -->
    </div>

<!--     <table class="cake-sql-log" id="sql_log" summary="Cake SQL Log" cellspacing="0"> -->
<!--         <caption id="sql_summary">(default) 0 queries took 0 ms</caption> -->
<!--         <thead> -->
<!--             <tr> -->
<!--                 <th>Nr</th> -->
<!--                 <th>Query</th> -->
<!--                 <th>Error</th> -->
<!--                 <th>Affected</th> -->
<!--                 <th>Num. rows</th> -->
<!--                 <th>Took (ms)</th> -->
<!--             </tr> -->
<!--         </thead> -->
<!--         <tbody> -->
<!--         </tbody> -->
<!--     </table> -->

</body>

</html>